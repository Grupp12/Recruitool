<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	<h:body>
		<ui:composition template="layout.xhtml">
			<ui:define name="content">
				<div>
					<div>
						New application
					</div>
					<h:form>
						<p class="applicationInput">
							<p>From (yyyy-MM-dd)</p>

							<h:inputText id="from"
										 value="#{myView.applicationForm.availabilityForm.from}"/>
							<p><h:messages class="inputError" for="from" /></p>
						</p>
						<p class="applicationInput">
							<p>To (yyyy-MM-dd)</p>
							<h:inputText id="to"
										 value="#{myView.applicationForm.availabilityForm.to}"/>
							<p><h:messages class="inputError" for="to" /></p>
						</p>
						<p>
							<h:commandButton value="Add availability"
											 action="#{myView.applicationForm.submitAvailabilityForm()}" />
						</p>
					</h:form>
					<h:form>
						<p class="applicationInput">
							<p>Competence</p>
							<h:selectOneMenu id="competence"
											 value="#{myView.applicationForm.competenceForm.competence}">
								<f:selectItems value="#{myView.allCompetences}" var="c"
											   itemLabel="#{c.name}" itemValue="#{c.name}" />
							</h:selectOneMenu>
							<p><h:messages class="inputError" for="competence" /></p>
						</p>
						<p class="applicationInput">
							<p>Years of experience</p>
							<h:inputText id="yoe"
										 value="#{myView.applicationForm.competenceForm.yearsOfExperience}"/>
							<p><h:messages class="inputError" for="yoe" /></p>
						</p>
						<p>
							<h:commandButton value="Add competence"
											 action="#{myView.applicationForm.submitCompetenceForm()}" />
						</p>
					</h:form>
					<h:form>
						<p>
							<h:commandButton value="Submit application" action="#{myView.submitApplication()}" />
							<h:inputHidden id="test"
										 value="#{myView.applicationForm.valid}"/>
							<p><h:messages class="inputError" for="test"/></p>
						</p>	
					</h:form>
					<h:form>
						<h:commandButton value="Download application" action="#{myView.downloadApplicationPDF()}"
										 disabled="#{myView.account == null or myView.account.application == null}"/>
					</h:form>
					<p>
						<h:outputText style="white-space: pre-wrap" value="#{myView.formMessage}"/>
					</p>
					<p>
						<h:outputText style="white-space: pre-wrap" value="#{myView.applicationForm.applicationStatus}"/>
					</p>
				</div>
			</ui:define>
		</ui:composition>
	</h:body>
</html>
